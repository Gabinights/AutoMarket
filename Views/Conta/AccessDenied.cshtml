@{
    ViewData["Title"] = "Acesso Negado";
    var returnUrl = ViewData["ReturnUrl"] as string;
}

<div class="container d-flex justify-content-center align-items-center" style="min-height: 70vh;">
    <div class="card shadow-lg text-center p-5" style="max-width: 600px; width: 100%;">
        <div class="card-body">
            <!-- Ícone de Alerta -->
            <div class="mb-4">
                <i class="bi bi-shield-exclamation text-danger" style="font-size: 6rem;"></i>
            </div>

            <!-- Título -->
            <h1 class="card-title fw-bold text-danger mb-3">
                Acesso Negado
            </h1>

            <!-- Mensagem -->
            <p class="card-text text-muted mb-4 fs-5">
                Não tem permissões para aceder a esta página.
            </p>

            <!-- Informação Adicional -->
            <div class="alert alert-warning text-start" role="alert">
                <h6 class="alert-heading">
                    <i class="bi bi-info-circle-fill"></i> Possíveis Razões:
                </h6>
                <ul class="mb-0">
                    <li><strong>Não é vendedor:</strong> Esta página é exclusiva para utilizadores com conta de vendedor aprovada.</li>
                    <li><strong>Conta pendente:</strong> Se é vendedor, a sua conta pode estar a aguardar aprovação.</li>
                    <li><strong>Sessão expirada:</strong> Por favor, faça login novamente.</li>
                </ul>
            </div>

            @if (!string.IsNullOrEmpty(returnUrl))
            {
                <div class="alert alert-info text-start" role="alert">
                    <strong>Tentou aceder:</strong> 
                    <code>@returnUrl</code>
                </div>
            }

            <!-- Ações -->
            <div class="d-grid gap-2 mt-4">
                @if (User.Identity?.IsAuthenticated == true)
                {
                    <!-- Utilizador Logado -->
                    <a asp-controller="Conta" asp-action="Perfil" class="btn btn-primary btn-lg">
                        <i class="bi bi-person-circle"></i> Ver o Meu Perfil
                    </a>
                    
                    @if (!User.IsInRole("Vendedor"))
                    {
                        <a asp-controller="Conta" asp-action="Register" class="btn btn-success btn-lg">
                            <i class="bi bi-shop"></i> Criar Conta de Vendedor
                        </a>
                    }
                    else
                    {
                        <a asp-controller="Conta" asp-action="AguardandoAprovacao" class="btn btn-warning btn-lg">
                            <i class="bi bi-hourglass-split"></i> Estado da Aprovação
                        </a>
                    }
                }
                else
                {
                    <!-- Utilizador Não Logado -->
                    <a asp-controller="Conta" asp-action="Login" asp-route-returnUrl="@returnUrl" class="btn btn-primary btn-lg">
                        <i class="bi bi-box-arrow-in-right"></i> Fazer Login
                    </a>
                    
                    <a asp-controller="Conta" asp-action="Register" class="btn btn-success btn-lg">
                        <i class="bi bi-person-plus"></i> Criar Conta
                    </a>
                }

                <hr />

                <a asp-controller="Home" asp-action="Index" class="btn btn-outline-secondary btn-lg">
                    <i class="bi bi-house"></i> Voltar à Página Inicial
                </a>

                <a asp-controller="Home" asp-action="Ajuda" class="btn btn-outline-info btn-lg">
                    <i class="bi bi-question-circle"></i> Centro de Ajuda
                </a>
            </div>
        </div>
    </div>
</div>

<style>
    .card {
        border: none;
        border-radius: 15px;
    }

    .btn-lg {
        padding: 0.8rem 1.5rem;
    }

    code {
        background-color: #f8f9fa;
        padding: 0.2rem 0.5rem;
        border-radius: 4px;
        color: #d63384;
    }
</style>
