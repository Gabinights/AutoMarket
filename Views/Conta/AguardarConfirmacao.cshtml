@model string
@{
    ViewData["Title"] = "Confirme o seu Email";
}

<main class="container text-center" style="max-width:700px; margin:3rem auto;">
    <div class="card">
        <div class="card-body p-5">
            <div class="mb-4">
                <i class="bi bi-envelope-check text-primary" style="font-size: 4rem;"></i>
            </div>
            
            <h2 class="card-title text-primary mb-4">Registo Efetuado com Sucesso!</h2>
            
            <div class="alert alert-warning" role="alert">
                <h5 class="alert-heading">
                    <i class="bi bi-exclamation-triangle"></i> Ação Necessária
                </h5>
                <p class="mb-0">
                    Para poder fazer login, precisa <strong>confirmar o seu email</strong>.
                </p>
            </div>

            @if (!string.IsNullOrEmpty(Model))
            {
                <!-- MODO DESENVOLVIMENTO: Mostra o link diretamente -->
                <div class="alert alert-info mt-4" role="alert">
                    <h6 class="alert-heading">
                        <i class="bi bi-code-slash"></i> Modo de Desenvolvimento
                    </h6>
                    <p class="mb-3">
                        <small>
                            Como o email não está configurado, aqui está o link de confirmação:
                        </small>
                    </p>
                    <a href="@Model" class="btn btn-success btn-lg w-100 mb-3">
                        <i class="bi bi-check-circle"></i> Confirmar Email Agora
                    </a>
                    <div class="mt-3">
                        <small class="text-muted">
                            Ou copie o link abaixo:
                        </small>
                        <div class="mt-2 p-2 bg-light border rounded" style="word-break: break-all; font-size: 0.85rem;">
                            @Model
                        </div>
                    </div>
                </div>
            }
            else
            {
                <!-- MODO PRODUÇÃO: Email foi enviado -->
                <div class="alert alert-success mt-4" role="alert">
                    <p class="mb-0">
                        <i class="bi bi-envelope"></i> 
                        <strong>Email enviado!</strong> Verifique a sua caixa de entrada.
                    </p>
                </div>
                
                <p class="text-muted mt-3">
                    <small>
                        <strong>Não recebeu?</strong> Verifique a pasta de Spam/Lixo Eletrônico.
                    </small>
                </p>
            }

            <hr class="my-4" />

            <div class="d-grid gap-2">
                <a asp-controller="Conta" asp-action="Login" class="btn btn-outline-primary">
                    <i class="bi bi-arrow-left"></i> Ir para Login
                </a>
                
                @if (string.IsNullOrEmpty(Model))
                {
                    <a asp-controller="Conta" asp-action="ReenviarConfirmacao" class="btn btn-outline-secondary btn-sm">
                        Reenviar Email de Confirmação
                    </a>
                }
            </div>
        </div>
    </div>
</main>
